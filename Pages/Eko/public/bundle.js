!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/public",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var a={apiKey:"AIzaSyBeVoVIvz18UDl4KCrkKTAXt859MNAydQ8",authDomain:"eko-ido.firebaseapp.com",databaseURL:"https://eko-ido.firebaseio.com",projectId:"eko-ido",storageBucket:"eko-ido.appspot.com",messagingSenderId:"694785424350",appId:"1:694785424350:web:84943eea2472b4194f7b4f"},s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),firebase.initializeApp(a),this.getInstance=this.getInstance.bind(this),this.getDatabase=this.getDatabase.bind(this),this.incrementValue=this.incrementValue.bind(this)}return i(e,[{key:"getInstance",value:function(){return firebase}},{key:"getDatabase",value:function(){return firebase.database()}},{key:"incrementValue",value:async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=firebase.database().ref(e),i=n.transaction((function(e){return e+t}));return await i}},{key:"pathExists",value:async function(e){var t=firebase.database().ref(e);return(await t.once("value")).exists()}},{key:"get",value:async function(e){return firebase.database().ref(e).once("value").then((function(e){return e}))}},{key:"addListener",value:async function(e,t){var n=firebase.database().ref(e);return await n.on("value",t)}},{key:"setValue",value:async function(e,t){var n=firebase.database().ref(e);return await n.set(t)}}]),e}());t.default=s},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=(s(n(4)),s(n(2)));function s(e){return e&&e.__esModule?e:{default:e}}s(n(0)).default.getInstance();(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.videoComponent={video:document.getElementById("video1"),btn_PlayPause:document.getElementById("play-pause"),btn_Like:document.getElementById("like"),btn_Unlike:document.getElementById("unlike"),div_Juice:document.querySelector(".orange-juice"),div_Bar:document.getElementById("bar"),label_VideoTime:document.getElementById("video-time"),label_Likes:document.getElementById("label-likes"),label_Unlikes:document.getElementById("label-unlikes"),label_views:document.getElementById("label-views")}}return i(e,[{key:"run",value:function(){var e=new a.default(this.videoComponent);e.ID="video3",e.Init()}}]),e}())).run()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=r(n(0)),s=r(n(3));function r(e){return e&&e.__esModule?e:{default:e}}a.default.getInstance();var u=1,l=0,o=-1,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.video=t.video,this.btn_PlayPause=t.btn_PlayPause,this.btn_Like=t.btn_Like,this.btn_Unlike=t.btn_Unlike,this.label_vidTime=t.label_VideoTime,this.label_Likes=t.label_Likes,this.label_Unlikes=t.label_Unlikes,this.label_views=t.label_views,this.progressBar=t.div_Bar,this.progressJuice=t.div_Juice,this.didView=!1,this.ID="video3",this.Init=this.Init.bind(this),this.OnClick_ButtonPlayPause=this.OnClick_ButtonPlayPause.bind(this),this.OnTimeUpdate_VideoPlayer=this.OnTimeUpdate_VideoPlayer.bind(this),this.OnClick_ProgressBar=this.OnClick_ProgressBar.bind(this),this.OnClick_ButtonLike=this.OnClick_ButtonLike.bind(this),this.OnClick_ButtonUnlike=this.OnClick_ButtonUnlike.bind(this),this._updateLikeButtonsColor=this._updateLikeButtonsColor.bind(this),this.video.pause()}return i(e,[{key:"Init",value:function(){var e=this;this.btn_PlayPause.onclick=this.OnClick_ButtonPlayPause,this.video.ontimeupdate=this.OnTimeUpdate_VideoPlayer,this.video.onclick=this.OnClick_ButtonPlayPause,this.progressBar.onclick=this.OnClick_ProgressBar,this.btn_Like.onclick=this.OnClick_ButtonLike,this.btn_Unlike.onclick=this.OnClick_ButtonUnlike,s.default.getUserID().then((function(t){var n="users/"+t+"/views/"+e.ID;a.default.addListener(n,(function(t){t.exists()&&e._updateLikeButtonsColor(t.val().like)}))})),a.default.addListener("Videos/"+this.ID+"/",(function(t){var n=t.val();e.label_Likes.innerHTML=""+n.likes,e.label_Unlikes.innerHTML=""+n.unlikes,e.label_views.innerHTML=""+n.views})),document.body.onkeyup=function(t){32==t.keyCode?e.OnClick_ButtonPlayPause():37==t.keyCode?e.video.currentTime=e.video.currentTime-1.5:39==t.keyCode&&(e.video.currentTime=e.video.currentTime+1.5)}}},{key:"_shouldUpdateCount",value:function(){var e=this;s.default.getUserID().then((function(t){var n="users/"+t+"/views/"+e.ID;a.default.pathExists(n).then((function(t){if(!t){a.default.setValue(n,{like:0}),a.default.incrementValue("Videos/"+e.ID+"/views")}}))})),this.didView=!0}},{key:"_updateLikeButtonsColor",value:function(e){switch(e){case u:this.btn_Like.style.color="#0084FF",this.btn_Unlike.style.color="#aaa";break;case l:this.btn_Like.style.color="#aaa",this.btn_Unlike.style.color="#aaa";break;case o:this.btn_Like.style.color="#aaa",this.btn_Unlike.style.color="#ff2b1c"}}},{key:"OnTimeUpdate_VideoPlayer",value:function(){var e=this._ssToHHMMSS(this.video.currentTime),t=this._ssToHHMMSS(this.video.duration);this.label_vidTime.innerHTML=" "+e+" / "+t+" ";var n=this.video.currentTime/this.video.duration;this.progressJuice.style.width=100*n+"%",this.video.ended&&(this.btn_PlayPause.className="play")}},{key:"OnClick_ButtonPlayPause",value:function(){this.video.paused?(this.video.play(),this.btn_PlayPause.className="pause",this.didView||this._shouldUpdateCount()):(this.btn_PlayPause.className="play",this.video.pause())}},{key:"OnClick_ProgressBar",value:function(){var e=(event.offsetX-this.progressBar.offsetLeft)/this.progressBar.offsetWidth;this.video.currentTime=e*this.video.duration}},{key:"OnClick_ButtonLike",value:function(){var e=this;s.default.getUserID().then((async function(t){var n="users/"+t.split(".").join("")+"/views/"+e.ID,i="Videos/"+e.ID+"/likes",s="Videos/"+e.ID+"/unlikes",r=await a.default.get(n);if(r.exists())switch(r.val().like){case u:a.default.setValue(n,{like:0}),a.default.incrementValue(i,-1);break;case l:a.default.setValue(n,{like:1}),a.default.incrementValue(i);break;case o:a.default.setValue(n,{like:1}),a.default.incrementValue(i),a.default.incrementValue(s,-1)}else a.default.setValue(n,{like:1}),a.default.incrementValue(i)}))}},{key:"OnClick_ButtonUnlike",value:function(){var e=this;s.default.getIP().then((function(t){var n="users/"+t.split(".").join("")+"/views/"+e.ID,i="Videos/"+e.ID+"/likes",s="Videos/"+e.ID+"/unlikes";a.default.get(n).then((function(e){if(e.exists())switch(e.val().like){case u:a.default.setValue(n,{like:-1}),a.default.incrementValue(i,-1),a.default.incrementValue(s);break;case l:a.default.setValue(n,{like:-1}),a.default.incrementValue(s);break;case o:a.default.setValue(n,{like:0}),a.default.incrementValue(s,-1)}else a.default.setValue(n,{like:-1}),a.default.incrementValue(s)}))}))}},{key:"_ssToHHMMSS",value:function(e){var t=parseInt(e,10);return[Math.floor(t/3600),Math.floor(t/60)%60,t%60].map((function(e){return e<10?"0"+e:e})).filter((function(e,t){return"00"!==e||t>0})).join(":")}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var a="http://api.ipstack.com/check?access_key=d6a0f4dddcef3105d3079c42de4cca7e",s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"getIP",value:async function(){var e=await fetch(a),t=await e.json();return console.log(JSON.stringify(t)),t.ip}},{key:"getUserID",value:async function(){var e=await fetch(a),t=await e.json();return console.log(JSON.stringify(t)),t.ip.split(".").join("")}}]),e}());t.default=s},function(e,t){}]);